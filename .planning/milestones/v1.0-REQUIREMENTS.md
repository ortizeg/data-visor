# Requirements Archive: v1.0 DataVisor MVP

**Archived:** 2026-02-12
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

**Defined:** 2026-02-10
**Core Value:** A single tool that replaces scattered scripts: load any CV dataset, visually browse with annotation overlays, compare GT vs predictions, cluster via embeddings, and surface mistakes — all in one workflow.

## v1 Requirements

### Data Ingestion

- [x] **INGEST-01**: Import COCO format annotations via streaming JSON parser (ijson) for 100K+ scale
- [x] **INGEST-02**: Load images from local filesystem paths
- [x] **INGEST-03**: Load images from Google Cloud Storage buckets
- [x] **INGEST-04**: Generate and cache image thumbnails during ingestion
- [x] **INGEST-05**: Store all sample metadata in DuckDB with analytical query support

### Grid & Browsing

- [x] **GRID-01**: Virtualized infinite-scroll grid of image thumbnails
- [x] **GRID-02**: Bounding box annotation overlays with class labels on images
- [x] **GRID-03**: GT vs Predictions comparison toggle (solid vs dashed lines)
- [x] **GRID-04**: Deterministic class-to-color hashing (consistent across sessions)
- [x] **GRID-05**: Sample detail modal with full-resolution image and all metadata

### Filtering & Search

- [x] **FILT-01**: Sidebar metadata filters (class, split, tags, any metadata field)
- [x] **FILT-02**: Search by filename and sort by any metadata field
- [x] **FILT-03**: Save and load filter configurations (saved views)
- [x] **FILT-04**: Add/remove tags on individual samples or bulk selections

### Embeddings & Visualization

- [x] **EMBED-01**: Generate image embeddings (DINOv2-base, 768-dim CLS token, MPS/CUDA/CPU auto-detect)
- [x] **EMBED-02**: t-SNE dimensionality reduction with background computation and SSE progress
- [x] **EMBED-03**: deck.gl 2D scatter plot with zoom, pan, and hover thumbnails
- [x] **EMBED-04**: Lasso selection on embedding map filters grid view to selected samples

### Model Evaluation

- [x] **EVAL-01**: Import pre-computed model predictions (JSON format)
- [x] **EVAL-02**: Error categorization: Hard False Positives, Label Errors, False Negatives
- [x] **EVAL-03**: Dataset statistics dashboard (class distribution, annotation counts, split breakdown)

### Intelligence & Agents

- [x] **AGENT-01**: Pydantic AI agent monitors error distribution and detects patterns
- [x] **AGENT-02**: Agent recommends actions based on detected patterns (augmentation, data collection)
- [x] **AGENT-03**: Qdrant-powered similarity search (find visually similar images)
- [x] **AGENT-04**: VLM auto-tagging (Moondream2) — tag images as dark, blurry, indoor, etc.

### Extensibility

- [x] **PLUGIN-01**: BasePlugin Python class with defined extension points

## v2 Requirements

### Data Ingestion

- **INGEST-06**: YOLO format parser (.txt annotation files)
- **INGEST-07**: Pascal VOC format parser (XML annotation files)

### Model Evaluation

- **EVAL-04**: Run inference in-tool against loaded models

### Extensibility

- **PLUGIN-02**: Ingestion hooks (custom code during import)
- **PLUGIN-03**: UI hooks (custom buttons/panels in the interface)
- **PLUGIN-04**: Transformation hooks (image pre-processing in browser)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Multi-user collaboration / auth | Personal tool, not a platform |
| Video annotation support | Image-only for v1 |
| Training pipeline integration | DataVisor inspects data, doesn't train models |
| Mobile/tablet interface | Desktop browser only |
| Real-time streaming inference | Batch-oriented analysis |
| 3D scatter plot | 2D sufficient for v1; revisit if needed |
| OAuth / magic link login | No auth needed for personal tool |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INGEST-01 | Phase 1: Data Foundation | Complete |
| INGEST-02 | Phase 1: Data Foundation | Complete |
| INGEST-03 | Phase 1: Data Foundation | Complete |
| INGEST-04 | Phase 1: Data Foundation | Complete |
| INGEST-05 | Phase 1: Data Foundation | Complete |
| GRID-01 | Phase 2: Visual Grid | Complete |
| GRID-02 | Phase 2: Visual Grid | Complete |
| GRID-03 | Phase 4: Predictions & Comparison | Complete |
| GRID-04 | Phase 2: Visual Grid | Complete |
| GRID-05 | Phase 2: Visual Grid | Complete |
| FILT-01 | Phase 3: Filtering & Search | Complete |
| FILT-02 | Phase 3: Filtering & Search | Complete |
| FILT-03 | Phase 3: Filtering & Search | Complete |
| FILT-04 | Phase 3: Filtering & Search | Complete |
| EMBED-01 | Phase 5: Embeddings & Visualization | Complete |
| EMBED-02 | Phase 5: Embeddings & Visualization | Complete |
| EMBED-03 | Phase 5: Embeddings & Visualization | Complete |
| EMBED-04 | Phase 5: Embeddings & Visualization | Complete |
| EVAL-01 | Phase 4: Predictions & Comparison | Complete |
| EVAL-02 | Phase 6: Error Analysis & Similarity | Complete |
| EVAL-03 | Phase 4: Predictions & Comparison | Complete |
| AGENT-01 | Phase 7: Intelligence & Agents | Complete |
| AGENT-02 | Phase 7: Intelligence & Agents | Complete |
| AGENT-03 | Phase 6: Error Analysis & Similarity | Complete |
| AGENT-04 | Phase 7: Intelligence & Agents | Complete |
| PLUGIN-01 | Phase 1: Data Foundation | Complete |

**Coverage:**
- v1 requirements: 26 total
- Shipped: 26
- Dropped: 0

---

## Milestone Summary

**Shipped:** 26 of 26 v1 requirements
**Adjusted:** EMBED-02 used t-SNE instead of UMAP due to Python 3.14 numba incompatibility
**Dropped:** None

---
*Requirements defined: 2026-02-10*
*Archived: 2026-02-12 as part of v1.0 milestone completion*
